(this["webpackJsonpmy-yelp"]=this["webpackJsonpmy-yelp"]||[]).push([[0],{21:function(e,t,s){},29:function(e,t,s){},35:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(1),i=s.n(a),c=s(18),r=s.n(c),o=(s(29),s(15)),u=(s.p,s(21),s(7)),l=s(8),d=s(10),h=s(9),b=s(11),j=s(2),p=s(13),v=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;if(Object(u.a)(this,s),(n=t.call(this,e)).onInputChange=function(e){var t=e.target.value,s=e.target.name;n.setState(Object(p.a)({},s,t))},n.onSubmit=function(e){console.log("State:",n.state),n.setState({finished:!0});var t=n.state,s={id:t.id,name:t.name,active:t.active,address:t.address,city:t.city,state:t.state,zip:t.zip,phone:t.phone};n.state.update?x.updatebusiness(s):x.addbusiness(s),e.preventDefault()},console.log("AddBusiness:",e),n.state={finished:!1,name:"",address:"",city:"",state:"",zip:"",phone:""},e.update){n.state.update=!0;var a=e.location.state.id;console.log("Updating id:",a);var i=x.allbusinesses()[a];n.state.id=i.id,n.state.name=i.name,n.state.address=i.address,n.state.city=i.city,n.state.state=i.state,n.state.zip=i.zip,n.state.phone=i.phone,n.state.active=i.active}return n}return Object(l.a)(s,[{key:"render",value:function(){return this.state.finished?Object(n.jsx)(j.a,{to:"/"}):Object(n.jsxs)("div",{className:"Add",children:[this.state.update?"Update Business":"Add Business",Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsx)("input",{type:"text",name:"name",value:this.state.name,placeholder:"Business Name",onChange:this.onInputChange}),Object(n.jsx)("input",{type:"text",name:"address",value:this.state.address,placeholder:"Address",onChange:this.onInputChange}),Object(n.jsx)("input",{type:"text",name:"city",value:this.state.city,placeholder:"City",onChange:this.onInputChange}),Object(n.jsx)("input",{type:"text",name:"state",value:this.state.state,placeholder:"State",onChange:this.onInputChange}),Object(n.jsx)("input",{type:"text",name:"zip",value:this.state.zip,placeholder:"Zip",onChange:this.onInputChange}),Object(n.jsx)("input",{type:"text",name:"phone",value:this.state.phone,placeholder:"Phone",onChange:this.onInputChange}),Object(n.jsx)("button",{type:"submit",children:"Save Business"})]})]})}}]),s}(i.a.Component),O=[{id:0,active:!0,name:"Panda Express",address:"1303 E University Blvd",city:"Tucson",state:"AZ",zip:"85719",phone:"(520)626-3750",reviews:[]},{id:1,active:!0,name:"Chipotle Mexican Grill",address:"905 E University Blvd Ste 149",city:"Tucson",state:"AZ",zip:"85719",phone:"(520)628-7967",reviews:["This was great"]},{id:2,active:!0,name:"Burger King",address:"454 W Grant Rd",city:"Tucson",state:"AZ",zip:"85705",phone:"(520) 622-2752",reviews:[]}];function g(e,t){return e.toLowerCase().includes(t.toLowerCase())}var x={findbusinesses:function(e,t,s){if(""==e)return[];var n=O.filter((function(n){return g(n.name,e)&&g(n.city,t)&&g(n.state,s)}));return n||[]},addbusiness:function(e){e.active=!0,e.id=O.length,O.push(e)},updatebusiness:function(e){O[e.id]=e,console.log("update:",e),console.log("update:",O)},deletebusiness:function(e){O[e].active=!1},allbusinesses:function(){return O},businessbyid:function(e){return O[e]},addreview:function(e,t){console.log("addreview",e,t),O[e].reviews.push(t)}},f=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(u.a)(this,s),(n=t.call(this,e)).onSubmit=function(e){n.setState({showbusiness:!0}),e.preventDefault()},n.livesearch=function(e){var t=e.target.value,s=x.findbusinesses(t,n.state.city,n.state.state);console.log("Bus:",s),n.setState({businesses:s,searchtext:t})},n.citysearch=function(e){var t=e.target.value;n.setState({city:t})},n.statesearch=function(e){var t=e.target.value;n.setState({state:t})},n.delete=function(e){console.log("delete",e.target.getAttribute("business")),x.deletebusiness(e.target.getAttribute("business")),n.forceUpdate()},n.state={searchtext:"",businesses:[],showbusiness:!1,city:"",state:""},n}return Object(l.a)(s,[{key:"render",value:function(){var e=this;console.log(x.allbusinesses());var t=this.state.businesses.filter((function(e){return e.active})),s=t.map((function(t){return Object(n.jsxs)("div",{children:[t.name,", ",t.address,", ",t.city,", ",t.state," ",t.zip,", ",t.phone," |",Object(n.jsx)(b.b,{to:{pathname:"/update",state:{id:t.id}},children:" Update"}),"| ",Object(n.jsx)("a",{onClick:e.delete,business:t.id,children:" Delete"})," |"]})}));if(this.state.showbusiness){var a=t.map((function(e){return e.id}));console.log("bs:",a);var i={pathname:"/business",state:{bs:a}};return Object(n.jsx)(j.a,{to:i})}return Object(n.jsxs)("div",{className:"searchbar",children:[Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsx)("p",{children:"Where should I look?"}),Object(n.jsx)("input",{type:"text",value:this.state.searchcity,placeholder:"What city are you in?",onChange:this.citysearch}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"text",value:this.state.searchstate,placeholder:"What state are you in?",onChange:this.statesearch}),Object(n.jsx)("br",{}),Object(n.jsx)("p",{children:"What should I look for?"}),Object(n.jsx)("input",{type:"text",value:this.state.searchtext,placeholder:"What are you looking for?",onChange:this.livesearch}),Object(n.jsx)("button",{type:"submit",children:"Search"})]})]}),0==s.length?"No Results found":Object(n.jsxs)("div",{children:["Results: ",s.length]}),s]})}}]),s}(i.a.Component),m=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(u.a)(this,s),(n=t.call(this,e)).reviewclick=function(e){console.log("event:",e,"bussiness:",e.target.getAttribute("business")),n.setState({reviewinp:e.target.getAttribute("business")}),console.log("review click:",n.state)},n.onSubmit=function(e){console.log("sumbit review:",n.state.reviewinp),x.addreview(n.state.reviewinp,n.state.reviewtext),n.setState({reviewinp:null}),e.preventDefault(),n.forceUpdate()},n.reviewchange=function(e){var t=e.target.value;n.setState({reviewtext:t})},console.log("business ctor,props",e),n.state={ids:e.location.state.bs,reviewinp:null,reviewtext:""},n}return Object(l.a)(s,[{key:"render",value:function(){for(var e=this.state.ids.map(x.businessbyid),t=[],s=0;s<e.length;s++){var a=e[s],i=[];0==a.reviews.length?i.push(Object(n.jsx)("div",{children:"Be the first to review!"})):(i.push(Object(n.jsx)("div",{children:"Reviews"})),i=i.concat(a.reviews.map((function(e){return Object(n.jsxs)("div",{children:[" ",Object(n.jsxs)("span",{style:{background:"white",border:"1"},children:['"',e,'"']})," "]})})))),t.push(Object(n.jsxs)("div",{children:[a.name,",",a.address,Object(n.jsx)("br",{}),i,Object(n.jsx)("button",{onClick:this.reviewclick,business:a.id,children:"Review"})]}))}return Object(n.jsxs)("div",{children:[t,this.state.reviewinp?Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[" ",Object(n.jsx)("input",{onChange:this.reviewchange,type:"text"})," ",Object(n.jsx)("button",{type:"submit",children:" Post Review"})," "]}):""]})}}]),s}(i.a.Component),y=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(u.a)(this,s),(n=t.call(this,e)).login=function(){n.setState({showLoginForm:!1})},n.state={showLoginForm:!0},n}return Object(l.a)(s,[{key:"render",value:function(){var e="",t=this.props.location;return t&&(console.log(t),t.state&&t.state.user&&(e=t.state.user)),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"loginButton",children:e.length>0?Object(n.jsxs)("div",{children:[Object(n.jsx)(b.b,{to:"/add",children:"Add Business"})," ",e]}):Object(n.jsx)(b.b,{to:"/login",children:"Login"})}),Object(n.jsx)("div",{children:Object(n.jsx)(f,{})})]})}}]),s}(i.a.Component),w=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(u.a)(this,s),(n=t.call(this,e)).onSubmit=function(e){n.state.username.trim().length>0&&n.setState({authenticated:!0}),e.preventDefault()},n.onInputChange=function(e){var t=e.target.value,s=e.target.name;n.setState(Object(p.a)({},s,t))},n.state={username:"",authenticated:!1},n}return Object(l.a)(s,[{key:"render",value:function(){var e={pathname:"/",state:{user:this.state.username}};return this.state.authenticated?Object(n.jsx)(j.a,{to:e}):Object(n.jsx)("div",{className:"login",children:Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsx)("label",{children:"Username:"}),Object(n.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.onInputChange}),Object(n.jsx)("button",{type:"submit",children:"Login"})]})})}}]),s}(i.a.Component);var C=function(){return Object(n.jsx)("div",{style:{backgroundImage:"url(/my-yelp/images/coffee.jpg)",backgroundSize:"cover",objectFit:"cover"},children:Object(n.jsx)(b.a,{basename:"/my-yelp",children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(j.b,{exact:!0,path:"/",render:function(e){return Object(n.jsx)(y,Object(o.a)({},e))}}),Object(n.jsx)(j.b,{path:"/login",children:Object(n.jsx)(w,{className:"login"})}),Object(n.jsx)(j.b,{path:"/add",render:function(e){return Object(n.jsx)(v,Object(o.a)({},e))}}),Object(n.jsx)(j.b,{path:"/update",render:function(e){return Object(n.jsx)(v,Object(o.a)({update:"true"},e))}}),Object(n.jsx)(j.b,{path:"/business",render:function(e){return Object(n.jsx)(m,Object(o.a)({},e))}})]})})})},S=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,36)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;s(e),n(e),a(e),i(e),c(e)}))};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(C,{})}),document.getElementById("root")),S()}},[[35,1,2]]]);
//# sourceMappingURL=main.a9e36ad9.chunk.js.map