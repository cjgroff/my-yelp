(this["webpackJsonpmy-yelp"]=this["webpackJsonpmy-yelp"]||[]).push([[0],{21:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(1),i=n.n(a),c=n(18),r=n.n(c),o=(n(29),n(15)),u=(n.p,n(21),n(7)),h=n(8),l=n(10),b=n(9),d=n(11),p=n(2),j=n(13),v=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var s;if(Object(u.a)(this,n),(s=t.call(this,e)).onInputChange=function(e){var t=e.target.value,n=e.target.name;s.setState(Object(j.a)({},n,t))},s.onSubmit=function(e){console.log("State:",s.state),s.setState({finished:!0});var t=s.state,n={id:t.id,name:t.name,active:t.active,address:t.address,city:t.city,state:t.state,zip:t.zip,phone:t.phone};s.state.update?O.updatebusiness(n):O.addbusiness(n),e.preventDefault()},console.log("AddBusiness:",e),s.state={finished:!1,name:"",address:"",city:"",state:"",zip:"",phone:""},e.update){s.state.update=!0;var a=e.location.state.id;console.log("Updating id:",a),O.allbusinesses().then((function(e){return e.json()})).then((function(e){console.log("bs",e);var t=e.find((function(e){return e.id==a}));s.setState({id:t.id,name:t.name,address:t.address,city:t.city,state:t.state,zip:t.zip,phone:t.phone})})).catch((function(e){return console.log("Fetch Failed",e)}))}return s}return Object(h.a)(n,[{key:"render",value:function(){return this.state.finished?Object(s.jsx)(p.a,{to:"/"}):Object(s.jsxs)("div",{className:"Add",children:[this.state.update?"Update Business":"Add Business",Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("input",{type:"text",name:"name",value:this.state.name,placeholder:"Business Name",onChange:this.onInputChange}),Object(s.jsx)("input",{type:"text",name:"address",value:this.state.address,placeholder:"Address",onChange:this.onInputChange}),Object(s.jsx)("input",{type:"text",name:"city",value:this.state.city,placeholder:"City",onChange:this.onInputChange}),Object(s.jsx)("input",{type:"text",name:"state",value:this.state.state,placeholder:"State",onChange:this.onInputChange}),Object(s.jsx)("input",{type:"text",name:"zip",value:this.state.zip,placeholder:"Zip",onChange:this.onInputChange}),Object(s.jsx)("input",{type:"text",name:"phone",value:this.state.phone,placeholder:"Phone",onChange:this.onInputChange}),Object(s.jsx)("button",{type:"submit",children:"Save Business"})]})]})}}]),n}(i.a.Component),f=[];var g={findbusinesses:function(e,t,n){var s="https://cjgroff-nearbyplaces-api.herokuapp.com/search/".concat(e,"/").concat(t,",").concat(n);return console.log("api",s),fetch(s)},addbusiness:function(e){fetch("https://cjgroff-nearbyplaces-api.herokuapp.com/place",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch((function(e){return console.log("Error",e)}))},updatebusiness:function(e){e.update=!0,console.log("updatebus####:",e),g.addbusiness(e)},deletebusiness:function(e){console.log("Deleteplace",e);var t="https://cjgroff-nearbyplaces-api.herokuapp.com/place/".concat(e);return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}})},allbusinesses:function(){var e="https://cjgroff-nearbyplaces-api.herokuapp.com/places";return console.log("api",e),fetch(e)},businessbyid:function(e){return f[e]},addreview:function(e,t){console.log("addreview",e,t);var n="https://cjgroff-nearbyplaces-api.herokuapp.com/review/".concat(e);return fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({review:t})})},get_reviews:function(e){var t="https://cjgroff-nearbyplaces-api.herokuapp.com/reviews/".concat(e.join(","));return console.log("api",t),fetch(t)}},O=g,m=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){s.setState({showbusiness:!0}),e.preventDefault()},s.livesearch=function(e){var t=e.target.value;s.setState({searchtext:t}),""!=t?O.findbusinesses(t,s.state.city,s.state.state).then((function(e){return e.json()})).then((function(e){console.log("b",e),s.setState({businesses:e})})).catch((function(e){return console.log("Fetch Failed",e)})):s.setState({businesses:[]})},s.citysearch=function(e){var t=e.target.value;s.setState({city:t})},s.statesearch=function(e){var t=e.target.value;s.setState({state:t})},s.delete=function(e){console.log("delete",e.target.getAttribute("business")),O.deletebusiness(e.target.getAttribute("business")),s.forceUpdate()},s.state={searchtext:"",businesses:[],showbusiness:!1,city:"",state:""},s}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.state.businesses,n=t.map((function(t){return Object(s.jsxs)("div",{children:[t.name,", ",t.address,", ",t.city,", ",t.state," ",t.zip,", ",t.phone," |",Object(s.jsx)(d.b,{to:{pathname:"/update",state:{id:t.id}},children:" Update"}),"| ",Object(s.jsx)("a",{onClick:e.delete,business:t.id,children:" Delete"})," |"]})}));if(this.state.showbusiness){var a=t.map((function(e){return e.id}));console.log("bs:",a);var i={pathname:"/business",state:{bs:a}};return Object(s.jsx)(p.a,{to:i})}return Object(s.jsxs)("div",{className:"searchbar",children:[Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("p",{children:"Where should I look?"}),Object(s.jsx)("input",{type:"text",value:this.state.searchcity,placeholder:"What city are you in?",onChange:this.citysearch}),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{type:"text",value:this.state.searchstate,placeholder:"What state are you in?",onChange:this.statesearch}),Object(s.jsx)("br",{}),Object(s.jsx)("p",{children:"What should I look for?"}),Object(s.jsx)("input",{type:"text",value:this.state.searchtext,placeholder:"What are you looking for?",onChange:this.livesearch}),Object(s.jsx)("button",{type:"submit",children:"Search"})]})]}),0==n.length?"No Results found":Object(s.jsxs)("div",{children:["Results: ",n.length]}),n]})}}]),n}(i.a.Component),x=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).reviewclick=function(e){console.log("event:",e,"bussiness:",e.target.getAttribute("business")),s.setState({reviewinp:e.target.getAttribute("business")}),console.log("review click:",s.state)},s.get_bus=function(){O.allbusinesses().then((function(e){return e.json()})).then((function(e){console.log("get_bus, allbs",e);var t=e.filter((function(e){return-1!=s.state.ids.indexOf(e.id)}));s.setState({businesses:t})}))},s.onSubmit=function(e){console.log("sumbit review:",s.state.reviewinp),O.addreview(s.state.reviewinp,s.state.reviewtext).then(s.get_bus),s.setState({reviewinp:null}),e.preventDefault(),s.forceUpdate()},s.reviewchange=function(e){var t=e.target.value;s.setState({reviewtext:t})},console.log("business ctor,props",e),s.state={ids:e.location.state.bs,reviewinp:null,reviewtext:"",businesses:[]},s.get_bus(),s}return Object(h.a)(n,[{key:"render",value:function(){for(var e=this.state.businesses,t=[],n=0;n<e.length;n++){var a=e[n],i=[];0==a.reviews.length?i.push(Object(s.jsx)("div",{children:"Be the first to review!"})):(i.push(Object(s.jsx)("div",{children:"Reviews"})),i=i.concat(a.reviews.map((function(e){return Object(s.jsxs)("div",{children:[" ",Object(s.jsxs)("span",{style:{background:"white",border:"1"},children:['"',e,'"']})," "]})})))),t.push(Object(s.jsxs)("div",{children:[a.name,",",a.address,Object(s.jsx)("br",{}),i,Object(s.jsx)("button",{onClick:this.reviewclick,business:a.id,children:"Review"})]}))}return Object(s.jsxs)("div",{children:[t,this.state.reviewinp?Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[" ",Object(s.jsx)("input",{onChange:this.reviewchange,type:"text"})," ",Object(s.jsx)("button",{type:"submit",children:" Post Review"})," "]}):""]})}}]),n}(i.a.Component),y=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).login=function(){s.setState({showLoginForm:!1})},s.state={showLoginForm:!0},s}return Object(h.a)(n,[{key:"render",value:function(){var e="",t=this.props.location;return t&&(console.log(t),t.state&&t.state.user&&(e=t.state.user)),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"loginButton",children:e.length>0?Object(s.jsxs)("div",{children:[Object(s.jsx)(d.b,{to:"/add",children:"Add Business"})," ",e]}):Object(s.jsx)(d.b,{to:"/login",children:"Login"})}),Object(s.jsx)("div",{children:Object(s.jsx)(m,{})})]})}}]),n}(i.a.Component),S=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){s.state.username.trim().length>0&&s.setState({authenticated:!0}),e.preventDefault()},s.onInputChange=function(e){var t=e.target.value,n=e.target.name;s.setState(Object(j.a)({},n,t))},s.state={username:"",authenticated:!1},s}return Object(h.a)(n,[{key:"render",value:function(){var e={pathname:"/",state:{user:this.state.username}};return this.state.authenticated?Object(s.jsx)(p.a,{to:e}):Object(s.jsx)("div",{className:"login",children:Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("label",{children:"Username:"}),Object(s.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.onInputChange}),Object(s.jsx)("button",{type:"submit",children:"Login"})]})})}}]),n}(i.a.Component);var w=function(){return Object(s.jsx)("div",{style:{backgroundImage:"url(/my-yelp/images/coffee.jpg)",backgroundSize:"cover",objectFit:"cover"},children:Object(s.jsx)(d.a,{basename:"/my-yelp",children:Object(s.jsxs)(p.d,{children:[Object(s.jsx)(p.b,{exact:!0,path:"/",render:function(e){return Object(s.jsx)(y,Object(o.a)({},e))}}),Object(s.jsx)(p.b,{path:"/login",children:Object(s.jsx)(S,{className:"login"})}),Object(s.jsx)(p.b,{path:"/add",render:function(e){return Object(s.jsx)(v,Object(o.a)({},e))}}),Object(s.jsx)(p.b,{path:"/update",render:function(e){return Object(s.jsx)(v,Object(o.a)({update:"true"},e))}}),Object(s.jsx)(p.b,{path:"/business",render:function(e){return Object(s.jsx)(x,Object(o.a)({},e))}})]})})})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),s(e),a(e),i(e),c(e)}))};r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root")),C()}},[[35,1,2]]]);
//# sourceMappingURL=main.8cd9ec54.chunk.js.map